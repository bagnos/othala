<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/template/merchantPageTemplate.xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:pe="http://primefaces.org/ui/extensions">


	<ui:define name="metadata">
		<f:metadata>

			<f:viewParam name="cercaOrd" value="#{gestioneOrdiniView.cercaOrd}"></f:viewParam>


		</f:metadata>
	</ui:define>


	<ui:define name="title">
		<h:outputText value="Dettaglio Ordine"></h:outputText>
	</ui:define>


	<ui:define name="Pagina">Ricerca</ui:define>
	<ui:define name="PaginaBreadcrumb">Dettaglio Ordine</ui:define>

	<ui:define name="bodyPageContent">

		<h:form prependId="false">

			<div class="container">
				<div class="row">
					<div class="col-sm-4">
						<h3 class="form-titoli">
							<h:outputText value="Dettaglio Ordine" />
						</h3>
					</div>
				</div>
				<div class="row spacer10">
					<div class="col-sm-2">
						<!-- indietro -->
						<p:commandButton icon="ui-icon-triangle-1-w btn-articolo-sel" id="btnTornaHome"
							rendered="#{gestioneOrdiniView.cercaOrd==null}"
							action="home.xhtml?faces-redirect=true&#38;torna=true" value="Torna" />
						<p:commandButton icon="ui-icon-triangle-1-w btn-articolo-sel" id="btnTorna"
							rendered="#{gestioneOrdiniView.cercaOrd!=null}"
							action="cercaOrdini.xhtml?faces-redirect=true&#38;torna=true" value="Torna" />

						<p:commandButton icon="ui-icon-triangle-1-w btn-articolo-sel" id="btnSpeditoHome"
							style="visibility:hidden" rendered="#{gestioneOrdiniView.cercaOrd==null}"
							action="home.xhtml?faces-redirect=true&#38;spedito=true" value="Torna" />
						<p:commandButton icon="ui-icon-triangle-1-w btn-articolo-sel" id="btnSpedito"
							style="visibility:hidden" rendered="#{gestioneOrdiniView.cercaOrd!=null}"
							action="cercaOrdini.xhtml?faces-redirect=true&#38;spedito=true" value="" />

					</div>

				</div>

				<h:panelGroup>
					<div class="row spacer20">
						<div class="col-sm-4">
							<h4>
								<strong>#{msg.catalogo_nrOrder}</strong>
							</h4>
							#{merchantBean.orderSelected.idOrder}
						</div>
						<div class="col-sm-4">
							<h4>
								<strong>#{msg.catalogo_nrTrans}</strong>
							</h4>
							#{merchantBean.orderSelected.idTransaction}
						</div>

						<div class="col-sm-4">
							<h4>
								<strong>Stato</strong>
							</h4>
							#{merchantBean.orderSelected.txStato}

						</div>
					</div>

					<div class="row spacer20">
						<div class="col-sm-4">

							<h5>
								<strong> <h:outputText value="#{msg.account_user}" />
								</strong>
							</h5>
							<div>
								<div>
									<p:outputLabel styleClass="label-control" value="#{msg.account_email}" />
									<h:outputText value="#{merchantBean.orderSelected.idUser}" />

								</div>
								<div>
									<p:outputLabel styleClass="label-control" value="#{msg.account_name}" />
									<h:outputText value="#{merchantBean.orderSelected.nameUser}" />
								</div>
								<div>
									<p:outputLabel styleClass="label-control" value="#{msg.account_surname}" />
									<h:outputText value="#{merchantBean.orderSelected.surnameUser}" />
								</div>
							</div>
						</div>

						<div class="col-sm-4 ">
							<h5>
								<strong> <h:outputText value="#{msg.delivery_invoiceAddress}" />
								</strong>
							</h5>

							<div>
								<p:outputLabel value="#{msg.delivery_name}" styleClass="label-control" />
								<h:outputText value="#{merchantBean.orderSelected.billingAddress.nome}" />
							</div>
							<div>
								<p:outputLabel value="#{msg.delivery_surname}" styleClass="label-control"
									for="lblCognomeFat" />
								<h:outputText id="lblCognomeFat"
									value="#{merchantBean.orderSelected.billingAddress.cognome}">
								</h:outputText>

							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_tel}" styleClass="label-control" for="lblTelefonoFat" />
								<h:outputText id="lblTelefonoFat" value="#{merchantBean.orderSelected.billingAddress.tel}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_address}" styleClass="label-control"
									for="lblIndirizzoFat" />
								<h:outputText id="lblIndirizzoFat" value="#{merchantBean.orderSelected.billingAddress.via}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_cap}" styleClass="label-control" for="lblPostaleFat" />
								<h:outputText id="lblPostaleFat" value="#{merchantBean.orderSelected.billingAddress.cap}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_city}" styleClass="label-control" for="lblCittaFat" />
								<h:outputText id="lblCittaFat" value="#{merchantBean.orderSelected.billingAddress.comune}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_prov}" styleClass="label-control" for="lblProvFat" />
								<h:outputText id="lblProvFat" value="#{merchantBean.orderSelected.billingAddress.provincia}" />
							</div>
							<div>
								<p:outputLabel value="#{msg.delivery_paese}" styleClass="label-control" for="lblNazFat" />
								<h:outputText id="lblNazFat" value="#{merchantBean.orderSelected.billingAddress.nazione}" />
							</div>

						</div>


						<div class="col-sm-4">

							<h5>
								<strong> <h:outputText value="#{msg.delivery_deliveryAddress}" />
								</strong>
							</h5>


							<div>
								<p:outputLabel value="#{msg.delivery_name}" styleClass="label-control" for="lnlNameSpe" />
								<h:outputText id="lnlNameSpe" value="#{merchantBean.orderSelected.shippingAddress.nome}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_surname}" styleClass="label-control"
									for="lblCognomeSpe" />
								<h:outputText id="lblCognomeSpe"
									value="#{merchantBean.orderSelected.shippingAddress.cognome}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_tel}" styleClass="label-control" for="lblTelefonoSpe" />
								<h:outputText id="lblTelefonoSpe" value="#{merchantBean.orderSelected.shippingAddress.tel}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_address}" styleClass="label-control"
									for="lblIndirizzoSpe" />
								<h:outputText rows="2" cols="30" required="true" id="lblIndirizzoSpe"
									value="#{merchantBean.orderSelected.shippingAddress.via}" />
							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_cap}" styleClass="label-control" for="lblPostaleSpe" />
								<h:outputText id="lblPostaleSpe" value="#{merchantBean.orderSelected.shippingAddress.cap}" />

							</div>

							<div>
								<p:outputLabel value="#{msg.delivery_city}" styleClass="label-control" for="lblCittaSpe" />
								<h:outputText id="lblCittaSpe" value="#{merchantBean.orderSelected.shippingAddress.comune}" />
							</div>


							<div>
								<p:outputLabel value="#{msg.delivery_prov}" styleClass="label-control" for="lblProvSpe" />
								<h:outputText id="lblProvSpe"
									value="#{merchantBean.orderSelected.shippingAddress.provincia}" />

							</div>
							<div>
								<p:outputLabel value="#{msg.delivery_paese}" styleClass="label-control" for="lblNazSpe" />
								<h:outputText id="lblNazSpe" value="#{merchantBean.orderSelected.shippingAddress.nazione}" />
							</div>

						</div>

					</div>

					<div class="row  spacer20">
						<div class="col-sm-12">
							<div class="table-responsive spacer10">
								<table class="table" id="cartTable">
									<thead>

										<tr>
											<th class="col-sm-3">#{msg.catalog_article}</th>
											<th class="col-sm-2">#{msg.catalog_color}</th>
											<th class="col-sm-1">#{msg.catalog_size}</th>
											<th class="col-sm-2">NEGOZIO</th>
											<th class="col-sm-1">#{msg.catalog_price}</th>
											<th class="col-sm-1">#{msg.catalog_qta}</th>
											<th class="col-sm-2">#{msg.catalog_totalPrice}</th>

										</tr>

									</thead>
									<tfoot>
										<tr>
											<td colspan="6" class="text-right">Totale Prodotti</td>
											<td><h:outputText value="#{merchantBean.orderSelected.imOrdineSenzaSpese}">
													<f:converter converterId="it.othala.BigDecimalConverter" />
												</h:outputText></td>
										</tr>


										<tr>
											<td colspan="6" class="text-right">#{msg.catalog_deliveryCost}</td>
											<td><h:outputText value="#{merchantBean.orderSelected.speseSpedizione.importoSpese}">
													<f:converter converterId="it.othala.BigDecimalConverter" />
												</h:outputText></td>
										</tr>
										<tr>
											<td colspan="6" class="text-right"><strong>#{msg.catalog_total}</strong></td>
											<td><h:outputText value="#{merchantBean.orderSelected.imOrdine}">
													<f:converter converterId="it.othala.BigDecimalConverter" />
												</h:outputText></td>
										</tr>

									</tfoot>
									<tbody>
										<ui:repeat var="art" value="#{merchantBean.orderSelected.cart}" varStatus="stBread">

											<tr>
												<td><div class="row">
														<div class="col-sm-12">
															<h:graphicImage styleClass="img-responsive img-small-cart"
																library="images/cartThumbinals" name="#{art.thumbnailsUrl}" />
															<div class="articolo">
																<h5>#{art.prdFullDTO.txBrand}</h5>
																<h6>#{art.prdFullDTO.description}</h6>

															</div>
														</div>
													</div></td>
												<td><h:outputText value="#{art.txColor}" /></td>
												<td><h:outputText value="#{art.txSize}" /></td>
												<td><h:outputText value="#{art.shop.txShop}" /></td>

												<td><h:outputText value="#{art.prdFullDTO.realPrice}">
														<f:converter converterId="it.othala.BigDecimalConverter" />
													</h:outputText></td>
												<td><h:outputText value="#{art.qtBooked}" /></td>
												<td><h:outputText value="#{art.totalPriced}">
														<f:converter converterId="it.othala.BigDecimalConverter" />
													</h:outputText></td>
											</tr>
										</ui:repeat>
									</tbody>
								</table>

							</div>
						</div>
					</div>
					<div class="row spacer20">
						<div class="col-sm-2" style="margin-bottom: 20px">
							<p:commandButton title="Elimina ordine" process="@this" update="@form"
								styleClass="ui-priority-primary" actionListener="#{gestioneOrdiniView.eliminaOrdine}"
								value="Elimina"
								oncomplete="if ($('#btnTorna').length) {$('#btnTorna').click()}  else {$('#btnTornaHome').click()}"
								rendered="#{merchantBean.orderSelected.idStato!=16}">
								<p:confirm header="Conferma" message="Sei sicuro di eliminare?" icon="ui-icon-alert" />
							</p:commandButton>

							<p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
								<p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes"
									icon="ui-icon-check" />
								<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no"
									icon="ui-icon-close" />
							</p:confirmDialog>

						</div>
						<div class="col-sm-2 col-sm-offset-8">
							<p:commandButton title="Spedisci e stampa contenuto ordine" process="@this" update="@form"
								onclick="window.open('../SpedisciOrdineServlet?idOrder=#{merchantBean.orderSelected.idOrder}');"
								rendered="#{merchantBean.orderSelected.idStato==3}"
								oncomplete="if ($('#btnSpedito').length) {$('#btnSpedito').click()}  else {$('#btnSpeditoHome').click()}"
								styleClass="ui-priority-primary" value="Spedisci">
							</p:commandButton>
							<div class="col-sm-2 col-sm-offset-8">
								<p:commandButton title="Stampa contenuto ordine" process="@this" update="@form"
									actionListener="#{gestioneOrdiniView.stampaBolla}"
									onclick="window.open('../SpedisciOrdineServlet?fgRis=true&#38;idOrder=#{merchantBean.orderSelected.idOrder}');"
									rendered="#{merchantBean.orderSelected.idStato==15}"
									oncomplete="if ($('#btnSpedito').length) {$('#btnSpedito').click()}  else {$('#btnSpeditoHome').click()}"
									styleClass="ui-priority-primary" value="Ristampa">
								</p:commandButton>
							</div>
						</div>
					</div>

				</h:panelGroup>

			</div>
		</h:form>
	</ui:define>
</ui:composition>
